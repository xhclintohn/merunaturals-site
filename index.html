<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Meru Naturals - Premium Tote Bags & Natural Products</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600&display=swap">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --primary-green: #2d5016;
            --secondary-gold: #e6b325;
            --light-bg: #f8f5f0;
            --white: #ffffff;
            --dark-text: #333333;
            --light-text: #666666;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --radius: 15px;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--light-bg);
            color: var(--dark-text);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
            padding-bottom: 80px;
        }

        .container {
            width: 100%;
            max-width: 100%;
            padding: 0 16px;
        }

        .mobile-container {
            max-width: 100%;
            overflow: hidden;
        }

        /* Header */
        .mobile-header {
            background: var(--primary-green);
            color: var(--white);
            padding: 15px 0;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(45, 80, 22, 0.3);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 16px;
        }

        .mobile-logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--secondary-gold);
        }

        .logo-text h1 {
            font-family: 'Playfair Display', serif;
            font-size: 1.3rem;
            font-weight: 600;
            line-height: 1.2;
        }

        .logo-text p {
            font-size: 0.75rem;
            opacity: 0.9;
        }

        .mobile-menu-btn {
            background: transparent;
            border: none;
            color: var(--white);
            font-size: 1.5rem;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            cursor: pointer;
        }

        /* Mobile Menu */
        .mobile-menu {
            position: fixed;
            top: 80px;
            left: 0;
            right: 0;
            background: var(--primary-green);
            padding: 20px;
            z-index: 999;
            transform: translateY(-100%);
            transition: transform 0.3s ease;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .mobile-menu.active {
            transform: translateY(0);
        }

        .menu-items {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .menu-item {
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--white);
            text-decoration: none;
            font-size: 1.1rem;
            padding: 12px;
            border-radius: var(--radius);
            transition: background 0.3s;
        }

        .menu-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Hero Section */
        .mobile-hero {
            padding: 100px 16px 40px;
            text-align: center;
            background: linear-gradient(rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.9));
            margin-bottom: 20px;
        }

        .hero-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            color: var(--primary-green);
            margin-bottom: 15px;
            line-height: 1.3;
        }

        .hero-subtitle {
            font-size: 1rem;
            color: var(--light-text);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        /* Category Cards */
        .category-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            padding: 0 16px;
            margin-bottom: 30px;
        }

        .mobile-category-card {
            background: var(--white);
            border-radius: var(--radius);
            padding: 25px 20px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 200px;
        }

        .mobile-category-card:active {
            transform: scale(0.98);
        }

        .mobile-category-card.selected {
            border-color: var(--secondary-gold);
            background: linear-gradient(135deg, #ffffff 0%, #fef9f3 100%);
        }

        .category-icon {
            font-size: 2.8rem;
            color: var(--primary-green);
            margin-bottom: 15px;
        }

        .category-title {
            font-size: 1.4rem;
            color: var(--primary-green);
            margin-bottom: 10px;
            font-weight: 600;
        }

        .category-desc {
            font-size: 0.9rem;
            color: var(--light-text);
            margin-bottom: 20px;
        }

        /* Products Section */
        .products-section {
            padding: 20px 0;
            display: none;
        }

        .mobile-back-btn {
            background: var(--primary-green);
            color: var(--white);
            border: none;
            border-radius: 25px;
            padding: 12px 25px;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 0 16px 20px;
            cursor: pointer;
            box-shadow: var(--shadow);
        }

        .section-header {
            text-align: center;
            padding: 0 16px;
            margin-bottom: 25px;
        }

        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.6rem;
            color: var(--primary-green);
            margin-bottom: 10px;
        }

        .section-subtitle {
            font-size: 0.95rem;
            color: var(--light-text);
        }

        /* Products Grid */
        .products-container {
            padding: 0 8px;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .mobile-product-card {
            background: var(--white);
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease;
        }

        .mobile-product-card:active {
            transform: scale(0.98);
        }

        .product-image-container {
            position: relative;
            width: 100%;
            height: 180px;
            background: #f5f5f5;
            overflow: hidden;
        }

        .product-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            transition: transform 0.3s ease;
        }

        .product-image.loading {
            opacity: 0.5;
        }

        .product-image.error {
            display: none;
        }

        .image-fallback {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary-green), #3a641f);
            color: var(--white);
            font-size: 2rem;
        }

        .product-info {
            padding: 15px;
        }

        .product-name {
            font-size: 1.1rem;
            color: var(--primary-green);
            margin-bottom: 8px;
            font-weight: 600;
            line-height: 1.3;
            height: 2.6em;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .product-price {
            font-size: 1.3rem;
            color: var(--secondary-gold);
            font-weight: 700;
            margin-bottom: 12px;
        }

        .mobile-order-btn {
            width: 100%;
            background: var(--secondary-gold);
            color: var(--primary-green);
            border: none;
            border-radius: 25px;
            padding: 12px;
            font-size: 1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mobile-order-btn:active {
            transform: scale(0.95);
        }

        /* Contact Section */
        .mobile-contact-section {
            background: var(--primary-green);
            color: var(--white);
            padding: 30px 16px;
            text-align: center;
            margin: 30px 0;
            border-radius: var(--radius);
        }

        .contact-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.6rem;
            margin-bottom: 15px;
        }

        .contact-text {
            font-size: 0.95rem;
            opacity: 0.9;
            margin-bottom: 25px;
            line-height: 1.5;
        }

        .whatsapp-float {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #25D366;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4);
            z-index: 1000;
            cursor: pointer;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* Loading */
        .loading-spinner {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px 0;
            color: var(--primary-green);
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(45, 80, 22, 0.1);
            border-top-color: var(--primary-green);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Bottom Navigation */
        .mobile-bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--white);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            color: var(--light-text);
            text-decoration: none;
            font-size: 0.8rem;
            padding: 8px;
            border-radius: 10px;
            transition: all 0.3s ease;
            min-width: 70px;
        }

        .nav-item.active {
            color: var(--primary-green);
            background: rgba(45, 80, 22, 0.1);
        }

        .nav-icon {
            font-size: 1.4rem;
        }

        /* Swipe Indicator */
        .swipe-indicator {
            text-align: center;
            padding: 15px;
            color: var(--light-text);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--primary-green);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            box-shadow: var(--shadow);
            z-index: 1001;
            opacity: 0;
            transition: all 0.3s ease;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        /* Media Queries */
        @media (min-width: 768px) {
            .container {
                max-width: 720px;
                margin: 0 auto;
            }
            
            .products-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 16px;
            }
            
            .product-image-container {
                height: 220px;
            }
        }

        @media (min-width: 1024px) {
            .container {
                max-width: 960px;
            }
            
            .products-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .visible {
            display: block !important;
        }

        .flex-center {
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>
    <!-- Mobile Header -->
    <header class="mobile-header">
        <div class="header-content">
            <div class="mobile-logo">
                <img src="https://raw.githubusercontent.com/xhclintohn/merunaturals-site/main/merunaturals.png" 
                     alt="Meru Naturals Logo" class="logo-img">
                <div class="logo-text">
                    <h1>Meru Naturals</h1>
                    <p>Premium Products</p>
                </div>
            </div>
            <button class="mobile-menu-btn" id="menuToggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>

    <!-- Mobile Menu -->
    <div class="mobile-menu" id="mobileMenu">
        <div class="menu-items">
            <a href="#" class="menu-item" onclick="showHome()">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </a>
            <a href="#" class="menu-item" onclick="showProducts('tote')">
                <i class="fas fa-shopping-bag"></i>
                <span>Tote Bags</span>
            </a>
            <a href="#" class="menu-item" onclick="showProducts('skin')">
                <i class="fas fa-spa"></i>
                <span>Skin & Hair</span>
            </a>
            <a href="#" class="menu-item" onclick="openWhatsApp()">
                <i class="fab fa-whatsapp"></i>
                <span>Contact Us</span>
            </a>
        </div>
    </div>

    <!-- Main Content -->
    <main class="mobile-container">
        <!-- Home Section -->
        <section id="homeSection" class="mobile-hero">
            <h1 class="hero-title">Welcome to Meru Naturals</h1>
            <p class="hero-subtitle">
                Discover handcrafted tote bags and premium natural products. 
                Quality, sustainability, and style in every piece.
            </p>
            
            <div class="swipe-indicator">
                <i class="fas fa-hand-point-down"></i>
                <span>Tap a category to browse</span>
            </div>

            <div class="category-grid">
                <div class="mobile-category-card" onclick="showProducts('tote')">
                    <div class="category-icon">
                        <i class="fas fa-shopping-bag"></i>
                    </div>
                    <h3 class="category-title">Tote Bags</h3>
                    <p class="category-desc">Beautiful handcrafted bags</p>
                    <button class="mobile-order-btn">
                        <i class="fas fa-eye"></i> View Collection
                    </button>
                </div>

                <div class="mobile-category-card" onclick="showProducts('skin')">
                    <div class="category-icon">
                        <i class="fas fa-spa"></i>
                    </div>
                    <h3 class="category-title">Skin & Hair</h3>
                    <p class="category-desc">Natural care products</p>
                    <button class="mobile-order-btn">
                        <i class="fas fa-eye"></i> View Products
                    </button>
                </div>
            </div>
        </section>

        <!-- Tote Bags Section -->
        <section id="toteSection" class="products-section">
            <button class="mobile-back-btn" onclick="showHome()">
                <i class="fas fa-arrow-left"></i> Back
            </button>
            
            <div class="section-header">
                <h2 class="section-title">Tote Bags Collection</h2>
                <p class="section-subtitle">Handcrafted with premium materials</p>
            </div>

            <div class="loading-spinner" id="toteLoading">
                <div class="spinner"></div>
                <p>Loading products...</p>
            </div>

            <div class="products-container">
                <div class="products-grid" id="toteGrid"></div>
            </div>
        </section>

        <!-- Skin Care Section -->
        <section id="skinSection" class="products-section">
            <button class="mobile-back-btn" onclick="showHome()">
                <i class="fas fa-arrow-left"></i> Back
            </button>
            
            <div class="section-header">
                <h2 class="section-title">Skin & Hair Care</h2>
                <p class="section-subtitle">100% natural ingredients</p>
            </div>

            <div class="loading-spinner" id="skinLoading">
                <div class="spinner"></div>
                <p>Loading products...</p>
            </div>

            <div class="products-container">
                <div class="products-grid" id="skinGrid"></div>
            </div>
        </section>

        <!-- Contact Section -->
        <section class="mobile-contact-section">
            <h2 class="contact-title">Ready to Order?</h2>
            <p class="contact-text">
                Contact us on WhatsApp for inquiries or orders. 
                We're here to help!
            </p>
            <button class="mobile-order-btn" onclick="openWhatsApp()" style="background: #25D366; color: white;">
                <i class="fab fa-whatsapp"></i> Chat Now
            </button>
        </section>
    </main>

    <!-- WhatsApp Float Button -->
    <div class="whatsapp-float" onclick="openWhatsApp()">
        <i class="fab fa-whatsapp"></i>
    </div>

    <!-- Bottom Navigation -->
    <nav class="mobile-bottom-nav">
        <a href="#" class="nav-item active" onclick="showHome()">
            <i class="fas fa-home nav-icon"></i>
            <span>Home</span>
        </a>
        <a href="#" class="nav-item" onclick="showProducts('tote')">
            <i class="fas fa-shopping-bag nav-icon"></i>
            <span>Tote Bags</span>
        </a>
        <a href="#" class="nav-item" onclick="showProducts('skin')">
            <i class="fas fa-spa nav-icon"></i>
            <span>Skin & Hair</span>
        </a>
        <a href="#" class="nav-item" onclick="openWhatsApp()">
            <i class="fab fa-whatsapp nav-icon"></i>
            <span>Contact</span>
        </a>
    </nav>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script>
        // Image URLs
        const IMAGE_BASE_URL = 'https://raw.githubusercontent.com/xhclintohn/merunaturals-site/main/';
        
        const toteImages = [
            'IMG-20251226-WA0171.jpg', 'IMG-20251226-WA0158.jpg', 'IMG-20251226-WA0178.jpg',
            'IMG-20251226-WA0157.jpg', 'IMG-20251226-WA0164.jpg', 'IMG-20251226-WA0149.jpg',
            'IMG-20251226-WA0155.jpg', 'IMG-20251226-WA0166.jpg', 'IMG-20251226-WA0147.jpg',
            'IMG-20251226-WA0185.jpg', 'IMG-20251226-WA0186.jpg', 'IMG-20251226-WA0168.jpg',
            'IMG-20251226-WA0152.jpg', 'IMG-20251226-WA0181.jpg', 'IMG-20251226-WA0154.jpg',
            'IMG-20251226-WA0175.jpg', 'IMG-20251226-WA0173.jpg', 'IMG-20251226-WA0159.jpg',
            'IMG-20251226-WA0163.jpg', 'IMG-20251226-WA0184.jpg', 'IMG-20251226-WA0179.jpg',
            'IMG-20251226-WA0156.jpg', 'IMG-20251226-WA0165.jpg', 'IMG-20251226-WA0176.jpg',
            'IMG-20251226-WA0153.jpg', 'IMG-20251226-WA0151.jpg', 'IMG-20251226-WA0169.jpg',
            'IMG-20251226-WA0177.jpg', 'IMG-20251226-WA0144.jpg', 'IMG-20251226-WA0170.jpg',
            'IMG-20251226-WA0183.jpg', 'IMG-20251226-WA0182.jpg', 'IMG-20251226-WA0162.jpg',
            'IMG-20251226-WA0174.jpg', 'IMG-20251226-WA0143.jpg', 'IMG-20251226-WA0167.jpg',
            'IMG-20251226-WA0161.jpg', 'IMG-20251226-WA0160.jpg', 'IMG-20251226-WA0145.jpg',
            'IMG-20251226-WA0172.jpg', 'IMG-20251226-WA0146.jpg', 'IMG-20251226-WA0140.jpg',
            'IMG-20251226-WA0141.jpg', 'IMG-20251226-WA0142.jpg', 'IMG-20251226-WA0138.jpg',
            'IMG-20251226-WA0127.jpg', 'IMG-20251226-WA0126.jpg', 'IMG-20251226-WA0139.jpg',
            'IMG-20251226-WA0136.jpg', 'IMG-20251226-WA0131.jpg', 'IMG-20251226-WA0133.jpg',
            'IMG-20251226-WA0129.jpg', 'IMG-20251226-WA0135.jpg', 'IMG-20251226-WA0128.jpg',
            'IMG-20251226-WA0134.jpg', 'IMG-20251226-WA0148.jpg', 'IMG-20251226-WA0137.jpg',
            'IMG-20251226-WA0132.jpg', 'IMG-20251223-WA0220.jpg', 'IMG-20251226-WA0130.jpg'
        ];

        const skinImages = [
            'IMG-20251228-WA0050.jpg', 'IMG-20251228-WA0045.jpg', 'IMG-20251228-WA0047.jpg',
            'IMG-20251228-WA0046.jpg', 'IMG-20251228-WA0049.jpg', 'IMG-20251228-WA0054.jpg',
            'IMG-20251228-WA0051.jpg', 'IMG-20251228-WA0052.jpg'
        ];

        const toteNames = [
            "African Print Tote", "Canvas Eco Bag", "Kitenge Style Tote",
            "Handwoven Basket Bag", "Colorful Market Tote", "Traditional Pattern Bag",
            "Ethnic Design Tote", "Natural Fiber Bag", "Modern African Tote",
            "Striped Canvas Bag", "Geometric Print Tote", "Boho Style Bag",
            "Classic Kitenge Tote", "Embroidered Handbag", "Patterned Market Bag",
            "Color Block Tote", "Traditional Weave Bag", "Contemporary African Bag",
            "Textured Canvas Tote", "Vibrant Print Bag", "Elegant Evening Tote",
            "Casual Day Bag", "Stylish Shopper", "Artisan Crafted Bag",
            "Unique Design Tote", "Handmade Market Tote", "Premium Kitenge Bag",
            "Fashionable Carryall", "Everyday Essential Tote", "Special Occasion Bag",
            "Colorful Carry Bag", "Patterned Shopper", "Textured Market Tote",
            "Designer African Bag", "Classic Canvas Tote", "Stylish Weave Bag",
            "Modern Market Tote", "Traditional Carry Bag", "Vibrant Canvas Tote",
            "Elegant Print Bag", "Handcrafted Tote", "Simple Shopper Bag",
            "Minimalist Tote", "Bold Print Bag", "Subtle Pattern Tote",
            "Artistic Design Bag", "Cultural Inspired Tote", "Contemporary Market Bag",
            "Functional Day Tote", "Spacious Shopper", "Compact Carry Bag",
            "Luxury African Tote", "Everyday Market Bag", "Premium Quality Tote"
        ];

        const skinNames = [
            "Organic Face Cream", "Natural Body Butter", "Herbal Hair Oil",
            "Vitamin E Serum", "Aloe Vera Gel", "Tea Tree Face Wash",
            "Coconut Hair Mask", "Shea Body Lotion"
        ];

        // DOM Elements
        const sections = {
            home: document.getElementById('homeSection'),
            tote: document.getElementById('toteSection'),
            skin: document.getElementById('skinSection')
        };

        const grids = {
            tote: document.getElementById('toteGrid'),
            skin: document.getElementById('skinGrid')
        };

        const loaders = {
            tote: document.getElementById('toteLoading'),
            skin: document.getElementById('skinLoading')
        };

        const menuToggle = document.getElementById('menuToggle');
        const mobileMenu = document.getElementById('mobileMenu');
        const toast = document.getElementById('toast');
        const navItems = document.querySelectorAll('.nav-item');

        // Mobile menu toggle
        menuToggle.addEventListener('click', () => {
            mobileMenu.classList.toggle('active');
            menuToggle.innerHTML = mobileMenu.classList.contains('active') 
                ? '<i class="fas fa-times"></i>' 
                : '<i class="fas fa-bars"></i>';
        });

        // Close menu when clicking outside
        document.addEventListener('click', (e) => {
            if (!mobileMenu.contains(e.target) && !menuToggle.contains(e.target)) {
                mobileMenu.classList.remove('active');
                menuToggle.innerHTML = '<i class="fas fa-bars"></i>';
            }
        });

        // Navigation functions
        function showHome() {
            Object.values(sections).forEach(section => section.style.display = 'none');
            sections.home.style.display = 'block';
            updateNav('home');
            mobileMenu.classList.remove('active');
            menuToggle.innerHTML = '<i class="fas fa-bars"></i>';
            scrollToTop();
            showToast('Welcome to Meru Naturals!');
        }

        function showProducts(type) {
            Object.values(sections).forEach(section => section.style.display = 'none');
            sections[type].style.display = 'block';
            updateNav(type === 'tote' ? 'tote' : 'skin');
            mobileMenu.classList.remove('active');
            menuToggle.innerHTML = '<i class="fas fa-bars"></i>';
            scrollToTop();
            
            if (grids[type].children.length === 0) {
                loadProducts(type);
            }
        }

        function updateNav(active) {
            navItems.forEach(item => {
                const icon = item.querySelector('.nav-icon').className;
                if (icon.includes('home') && active === 'home') {
                    item.classList.add('active');
                } else if (icon.includes('shopping-bag') && active === 'tote') {
                    item.classList.add('active');
                } else if (icon.includes('spa') && active === 'skin') {
                    item.classList.add('active');
                } else if (icon.includes('whatsapp') && active === 'contact') {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
        }

        function loadProducts(type) {
            const images = type === 'tote' ? toteImages : skinImages;
            const names = type === 'tote' ? toteNames : skinNames;
            const folder = type === 'tote' ? 'Images/' : 'Images2/images/';
            
            loaders[type].style.display = 'flex';
            grids[type].innerHTML = '';
            
            let loadedCount = 0;
            
            images.forEach((img, index) => {
                const price = type === 'tote' 
                    ? (1500 + Math.random() * 1000).toFixed(0)
                    : (800 + Math.random() * 700).toFixed(0);
                
                const name = names[index % names.length];
                const imageUrl = IMAGE_BASE_URL + folder + img;
                
                const productCard = document.createElement('div');
                productCard.className = 'mobile-product-card';
                productCard.innerHTML = `
                    <div class="product-image-container">
                        <img src="${imageUrl}" 
                             alt="${name}" 
                             class="product-image" 
                             loading="lazy"
                             onload="imageLoaded('${type}', ${images.length})"
                             onerror="this.classList.add('error'); this.nextElementSibling.style.display='flex';">
                        <div class="image-fallback" style="display: none;">
                            <i class="fas fa-${type === 'tote' ? 'shopping-bag' : 'spa'}"></i>
                        </div>
                    </div>
                    <div class="product-info">
                        <h3 class="product-name">${name}</h3>
                        <div class="product-price">KSh ${price}</div>
                        <button class="mobile-order-btn" onclick="orderProduct('${name}', ${price})">
                            <i class="fab fa-whatsapp"></i> Order Now
                        </button>
                    </div>
                `;
                
                grids[type].appendChild(productCard);
            });
            
            // Set timeout to hide loader if images take too long
            setTimeout(() => {
                loaders[type].style.display = 'none';
            }, 3000);
        }

        function imageLoaded(type, total) {
            // This function will be called when each image loads
            // We could add progress tracking here if needed
        }

        function orderProduct(name, price) {
            openWhatsApp(name, price);
            showToast(`Ordering: ${name}`);
        }

        function openWhatsApp(productName = '', price = '') {
            const phone = '254734943210';
            let message = 'Hello! I\'m interested in products from Meru Naturals.';
            
            if (productName) {
                message = `Hello! I'd like to order: ${productName} (KSh ${price}) from Meru Naturals.`;
            }
            
            const url = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
            window.open(url, '_blank');
            
            showToast('Opening WhatsApp...');
        }

        function showToast(message) {
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            showHome();
            
            // Preload logo image
            const logoImg = new Image();
            logoImg.src = 'https://raw.githubusercontent.com/xhclintohn/merunaturals-site/main/merunaturals.png';
            
            // Touch event improvements for mobile
            document.addEventListener('touchstart', function() {}, {passive: true});
            
            // Prevent zoom on double tap
            let lastTouchEnd = 0;
            document.addEventListener('touchend', function(event) {
                const now = Date.now();
                if (now - lastTouchEnd <= 300) {
                    event.preventDefault();
                }
                lastTouchEnd = now;
            }, false);
        });

        // Handle back button
        window.addEventListener('popstate', function(event) {
            showHome();
        });
    </script>
</body>
</html>